import{B as r}from"./browser-polyfill-B9eD1zDQ.js";r.commands.onCommand.addListener(async o=>{if(o==="_execute_action")try{const t=await r.windows.getCurrent(),[e]=await r.tabs.query({active:!0,currentWindow:!0});if(!e.id)return;const a=400,n=600,s=(t.width||0)-a-20;await r.windows.create({url:"index.html",type:"popup",width:a,height:n,left:s,top:20,focused:!0})}catch(t){console.error("Error opening popup:",t)}});r.tabs.onRemoved.addListener(async o=>{try{const t=`tab_${o}`;await r.storage.local.remove(t)}catch(t){console.error("Error clearing storage:",t)}});r.tabs.onActivated.addListener(async o=>{try{const t=await r.tabs.query({});for(const e of t)if(e.id!==o.tabId){const a=`tab_${e.id}`;await r.storage.local.remove(a)}}catch(t){console.error("Error clearing storage on tab switch:",t)}});
